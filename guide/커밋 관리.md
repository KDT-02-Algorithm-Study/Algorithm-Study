# 커밋 관리

❗커밋은 신중하게 해주시고 실수했을 때 참고하세요.

# ➡️푸시 전
## 🚧아직 푸시되지 않은(로컬) 커밋 메시지 고치기
* 커밋 메세지 확인
```
git log --oneline
```
* 가장 최근 커밋 메시지 수정
```
git commit --amend -m "새로운 메시지"
```
* 커밋된 파일은 하나도 바뀌지 않고 대신 커밋 메시지를 바꿀 수 있다.

## 🚧이미 작성한 커밋에 파일 추가하기
* 앗, 이미 커밋을 해버렸는데 이 커밋에 포함되면 좋을 것 같은 작업이 추가되어 버렸다.
* 당황하지 말고 일단 수정사항을 스테이지로 올린다.
```
git add "파일명"
```
또는
```
git add .
```
* 메시지를 고치는 것과 동일한 커맨드를 쓰면된다.
```
git commit --amend -m "새로운 작업을 포함한 커밋 메시지"
```
* 기존 커밋에 새로운 작업이 포함된다.

## 🚧스테이지에 올린 파일 취소하기
* 스테이지에 파일을 잘못포함시켜 버렸다.
```
git restore --staged "파일명"
```
* 또는
```
git reset HEAD "파일명"
```
* 해당 파일의 상태가 untracked로 바뀐다.

## 🚧푸시 하기전에 커밋 취소 하기
* 이미 커밋한 작업들에 실수가 들어있었다. 
* 약간 위험한 작업이다.
* 커밋 해시(6자리) 확인하기
```
git log --oneline
```
* reset
```
git reset --옵션 "커밋 해시"
```
### reset 옵션
* --hard
  * 제일 위험한 옵션이다. 
  * 커밋한 이력도 없어지고 파일의 **변동사항 자체를 되돌려버린다.**
  * 실수로 이 옵션을 써 버렸어도 기회는 남아있다.
    * 부담없이 도움을 요청한다.
* --soft
  * 커밋한 이력이 없어지지만 변동사항은 남아있고 스테이지에 올라간 상태가 된다.
* --mixed
  * default값
  * 커밋한 이력이 없어지고 스테이지에서도 내려가지만, untracked로 변동 사항은 남아있다.
  * 권장 옵션

# ➡️푸시 후 
* 충돌이 발생할 수 있으므로 그냥 덮어 씌운다.
* ~~그래도 되돌리고 싶다면 부담없이 도움을 요청한다.~~